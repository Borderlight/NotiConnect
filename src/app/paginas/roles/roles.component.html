<div class="roles-container">
  <button class="back-button" (click)="goBack()" aria-label="Volver atrás">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
  </button>

  <h1>Gestión de Administradores</h1>

  <!-- Formulario para agregar nuevo administrador -->
  <div class="seccion">
    <h2>Agregar Nuevo Administrador</h2>
    <form [formGroup]="formularioAdmin" (ngSubmit)="agregarAdministrador()" class="formulario">
      <div class="campo">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" formControlName="nombre" placeholder="Nombre del administrador">
      </div>
      <div class="campo">
        <label for="email">Email:</label>
        <input type="email" id="email" formControlName="email" placeholder="Email del administrador">
      </div>
      <button type="submit" [disabled]="!formularioAdmin.valid" class="btn-agregar">
        Agregar Administrador
      </button>
    </form>
  </div>

  <!-- Lista de administradores -->
  <div class="seccion">
    <h2>Administradores Actuales</h2>
    <div class="busqueda">
      <input type="text" 
             [(ngModel)]="terminoBusqueda" 
             (input)="filtrarAdministradores()"
             placeholder="Buscar administradores...">
    </div>
    <div class="lista-administradores">
      @for (admin of administradoresFiltrados; track admin.id) {
        <div class="admin-item">
          <div class="info-admin">
            <h3>{{ admin.nombre }}</h3>
            <p>{{ admin.email }}</p>
            <small>Agregado: {{ admin.fechaCreacion | date:'dd/MM/yyyy' }}</small>
          </div>
          <button class="btn-eliminar" (click)="abrirDialogEliminar(admin)">
            Eliminar
          </button>
        </div>
      }
      @if (administradoresFiltrados.length === 0) {
        <p class="sin-resultados">No se encontraron administradores</p>
      }
    </div>
  </div>
</div>

@if (mostrarDialog && adminAEliminar) {
  <app-eliminar-admin-dialog
    [nombreAdmin]="adminAEliminar.nombre"
    (confirmar)="confirmarEliminacion()"
    (cerrar)="cerrarDialog()">
  </app-eliminar-admin-dialog>
}
