<div class="evento-card{{ mostrarDetalles ? ' mostrar-detalles' : '' }}">
  <div class="evento-botones-topright">
    @if (!editMode) {
      <button class="btn-editar" (click)="editarEvento($event)" [attr.aria-label]="'EVENT_CARD.EDIT_EVENT' | translate">
        <img src="/assets/evento/lapiz.png" alt="Editar" class="icono-lapiz">
      </button>
      <button class="btn-descargar" (click)="descargarEvento($event)" [attr.aria-label]="'EVENT_CARD.DOWNLOAD_EVENT' | translate">
        <img src="/assets/evento/descargar.webp" alt="Descargar" class="icono-descargar">
      </button>
      <button class="btn-eliminar" (click)="eliminarEvento($event)" [attr.aria-label]="'EVENT_CARD.DELETE_EVENT' | translate">
        <img src="/assets/evento/papelera.png" [alt]="'EVENT_CARD.DELETE' | translate" class="icono-papelera">
      </button>
    } @else {
      <button class="btn-guardar" (click)="guardarEdicion($event)" [attr.aria-label]="'EVENT_CARD.SAVE_EVENT' | translate">üíæ</button>
      <button class="btn-cancelar" (click)="cancelarEdicion($event)" [attr.aria-label]="'EVENT_CARD.CANCEL_EDIT' | translate">‚úñ</button>
    }
  </div>
  <div class="evento-imagen-col">
    <img [src]="evento.imagen" [alt]="'EVENT_CARD.EVENT_IMAGE' | translate:{title: evento.titulo}" class="evento-imagen">
  </div>
  <div class="evento-main-col">
    <div class="evento-header">
      <span class="evento-tipo">{{ 'EVENT_TYPES.' + evento.tipoEvento | translate }}</span>
      <span class="acciones">
        <!-- Los botones aqu√≠ quedan ocultos por CSS -->
      </span>
    </div>
    <div class="evento-titulo-detalles-row-alineado">
      <div class="evento-titulo-col">
        @if (!editMode) {
          <h2 class="evento-titulo">{{ evento.titulo }}</h2>
          @if (evento.ponente) {
            <p><strong>Ponente:</strong> {{ evento.ponente }}</p>
          }
          <p><strong>Fecha:</strong> {{ fechaFormateada }}</p>
          <p><strong>Hora:</strong> {{ evento.horaInicio }}<span *ngIf="evento.horaFin"> - {{ evento.horaFin }}</span></p>
          <p><strong>Lugar:</strong> {{ evento.lugar }}<span *ngIf="evento.aula"> - {{ evento.aula }}</span></p>
          @if (evento.actividad) {
            <p><strong>Actividad:</strong> {{ evento.actividad }}</p>
          }
          <button class="btn-ver-mas" (click)="toggleDetalles($event)">
            {{ mostrarDetalles ? 'Ocultar detalles' : 'Ver m√°s detalles' }}
          </button>
        } @else {
          <h2 class="evento-titulo"><input formControlName="titulo" class="input-edit" [ngModel]="evento.titulo" /></h2>
          <p><strong>Ponente:</strong> <input formControlName="ponente" class="input-edit" [ngModel]="evento.ponente" /></p>
          <p><strong>Fecha:</strong> <input formControlName="fecha" class="input-edit" type="date" [ngModel]="evento.fecha | date:'yyyy-MM-dd'" /></p>
          <p><strong>Hora:</strong> <input formControlName="horaInicio" class="input-edit" type="time" [ngModel]="evento.horaInicio" /><span *ngIf="evento.horaFin"> - <input formControlName="horaFin" class="input-edit" type="time" [ngModel]="evento.horaFin" /></span></p>
          <p><strong>Lugar:</strong> <input formControlName="lugar" class="input-edit" [ngModel]="evento.lugar" />
            <span *ngIf="evento.aula"> - <input formControlName="aula" class="input-edit" [ngModel]="evento.aula" /></span>
          </p>
          <p *ngIf="evento.actividad"><strong>Actividad:</strong> <input formControlName="actividad" class="input-edit" [ngModel]="evento.actividad" /></p>
          <button class="btn-ver-mas" (click)="toggleDetalles($event)">
            {{ mostrarDetalles ? 'Ocultar detalles' : 'Ver m√°s detalles' }}
          </button>
        }
      </div>
      @if (mostrarDetalles) {
        <div class="evento-detalles-col-alineado">
          <div class="detalles-evento">
            @if (!editMode) {
              <p><strong>Descripci√≥n:</strong> {{ evento.descripcion }}</p>
              <p><strong>Servicios:</strong> {{ serviciosTexto || '-' }}</p>
              <p><strong>Adjuntos:</strong> {{ adjuntosTexto || '-' }}</p>
              <p><strong>Enlaces:</strong> {{ enlacesTexto || '-' }}</p>
            } @else {
              <p><strong>Descripci√≥n:</strong> <input formControlName="descripcion" class="input-edit" [value]="descripcionTexto" /></p>
              <p><strong>Servicios:</strong> <input formControlName="servicios" class="input-edit" [value]="serviciosTexto" /></p>
              <p><strong>Adjuntos:</strong> <input formControlName="adjuntos" class="input-edit" [value]="adjuntosTexto" /></p>
              <p><strong>Enlaces:</strong> <input formControlName="enlaces" class="input-edit" [value]="enlacesTexto" /></p>
            }
            <div style="height: 1.7em;"></div>
          </div>
        </div>
      }
    </div>
  </div>
</div>