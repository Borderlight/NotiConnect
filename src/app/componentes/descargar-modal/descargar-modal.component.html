<div class="modal-backdrop" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>Opciones de descarga</h2>
    
    <div class="seccion">
      <h3>Formato de descarga</h3>
      <div class="checkbox-group">
        <label>
          <input type="checkbox" [(ngModel)]="options.formats.json"> JSON
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="options.formats.csv"> CSV
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="options.formats.pdf"> PDF
        </label>
      </div>
    </div>

    <div class="seccion">
      <h3>Campos a incluir</h3>
      <div class="checkbox-group campos">
        @for (field of availableFields; track field) {
          <label>
            <input type="checkbox" [(ngModel)]="options.fields[field.value]">
            {{ field.label }}
          </label>
        }
      </div>
    </div>

    <div class="botones">
      <button class="btn-descargar" 
              [disabled]="!isValidSelection()" 
              (click)="descargarSeleccionado()">
        Descargar seleccionado
      </button>
      <button class="btn-cancelar" (click)="cerrarModal()">Cancelar</button>
    </div>
  </div>
</div> 