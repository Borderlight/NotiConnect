<div class="modal-backdrop" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>{{ 'DOWNLOAD_MODAL.TITLE' | translate }}</h2>
    
    <div class="seccion">
      <h3>{{ 'DOWNLOAD_MODAL.FORMAT_SECTION.TITLE' | translate }}</h3>
      <div class="checkbox-group">
        <label>
          <input type="checkbox" [(ngModel)]="options.formats.json"> JSON
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="options.formats.csv"> CSV
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="options.formats.pdf"> PDF
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="options.formats.word"> Word
        </label>
      </div>
    </div>

    <div class="seccion">
      <h3>{{ 'DOWNLOAD_MODAL.FIELDS_SECTION.TITLE' | translate }}</h3>
      <div class="checkbox-group campos">
        @for (field of availableFields; track field) {
          <label>
            <input type="checkbox" [(ngModel)]="options.fields[field.value]">
            {{ field.label | translate }}
          </label>
        }
      </div>
    </div>

    <div class="botones">
      <button class="btn-descargar" 
              [disabled]="!isValidSelection()" 
              (click)="descargarSeleccionado()">
        {{ 'DOWNLOAD_MODAL.BUTTONS.DOWNLOAD' | translate }}
      </button>
      <button class="btn-cancelar" (click)="cerrarModal()">{{ 'DOWNLOAD_MODAL.BUTTONS.CANCEL' | translate }}</button>
    </div>
  </div>
</div>